function GetURL(t){return"pages/"+t+".html"}function GetFileName(){return window.location.href.match(/[^\/]+$/)[0]}function Logout(){window.localStorage.setItem("email",null),window.localStorage.setItem("logged",!1),window.location.href="login.html"}function CheckUserdata(){var t=1==$("#login-page").length;userdata.email=window.localStorage.getItem("email"),userdata.logged="true"==window.localStorage.getItem("logged"),t&&userdata.logged&&(window.location.href="index.html"),t||userdata.logged||(window.location.href="login.html")}var content="#app-content",userdata={email:null,logged:!1},profile={init:function(){var t="http://localhost/webapp/app/all-users.php",e=$("#profile-list li");$.ajax(t).done(function(t){t=$.parseJSON(t);for(var n=0;n<t.length;++n){var a=t[n],i=$(e).clone();$(i).find("a").attr("data-send",a.id),$(i).find(".username").html(a.username),$(i).find(".real-name").html(a["real-name"]),$("#profile-list").append(i)}$(e).remove()})}},settings={notifications:{sound:!1,vibrate:!1},init:function(){$(".settings-options input").change(function(){var t=$(this).attr("data-var");settings.notifications[t]=$(this).is(":checked")})}},system={init:function(){$("input.switch").each(function(){var t=$(this).attr("data-label");$(this).wrap('<label class="switch">');var e=$("<span>").html(t),n=$("<div>").addClass("switch-background"),a=$("<div>").addClass("switch-handle");$(n).append(a),$(this).parent().append(e).append(n)})}};$("#app-options a:not(.ignore)").click(function(){var t=$(this).attr("href");return $(content).load(GetURL(t),function(){switch(t){case"profile-list":profile.init()}}),$("#toggle-app-sidebar").prop("checked",!1),!1}),$("#login").submit(function(t){var e=$("#input-email").val(),n=$("#input-password").val();"fake@email.com"==e&&"123"==n?(alert("You have logged in!"),window.localStorage.setItem("email",e),window.localStorage.setItem("logged",!0),window.location.href="index.html"):alert("Incorrect username and password!"),t.preventDefault()}),$("#user-logout").click(function(){Logout(),window.location.href="login.html"}),$(function(){return"undefined"==typeof localStorage?(alert("This app is incompatible with your device."),!1):(CheckUserdata(),void $(content).load(GetURL("settings"),function(){system.init(),settings.init()}))});